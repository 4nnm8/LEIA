<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Configurer LÉIA</title>
	<link rel="stylesheet" href="style.css" type="text/css" media="screen" />
  </head>
  <body class="conf">	
    <p>	
      <label for="leia">Activer ou désactiver la converson du texte<br/><br/>
        <select id="leia">
                  <option value="0">Désactiver</option>
                  <option value="1">Activer</option>
		</select>
	  </label>	
	</p>
	<p>	
      <label for="imode">Choix du mode de lecture inclusive<br/><br/>
        <select id="imode">
          <option value="0">Mots lus aux deux genres</option>
          <option value="1">Mots lus au féminin uniquement</option>
          <option value="2">Mots lus au maculin uniquement</option>
		</select>
	  </label>	
	</p>
	<p>
	  <button id="launch">Appliquer les changements</button>
	</p>
	<p><b>Raccourcis claviers (hors pavé numérique) :</b></p><br/>
	<p>Ouvrir le panneau de configuration : <kbd>Alt</kbd> <kbd>Shift</kbd> <kbd>C</kbd></p>
    <p>Insérer un point médian : <kbd>AltGr</kbd> <kbd>.</kbd></p>
    <script>
    document.getElementById("leia").selectedIndex = localStorage.getItem("leia") || 0;
    document.getElementById("imode").selectedIndex = localStorage.getItem("imode") || 0;

    function setVal(n){
	  let vl = document.getElementById(n).options[document.getElementById(n).selectedIndex].value;
      localStorage.setItem(n,vl);
    }
	function passCfg(){
      setVal("leia");setVal("imode");
      window.opener.location.reload();
	  window.close();
    }
	document.getElementById("launch").addEventListener("click",passCfg,false);
	window.addEventListener("beforeunload",passCfg,false);
    </script>
  </body>
</html>
